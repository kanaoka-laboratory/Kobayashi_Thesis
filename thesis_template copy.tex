\documentclass[a4j,12pt]{jreport}
\title{ {\LaTeX} 動作確認テスト・サンプルファイル}
\author{情報リテラシTA}
\date{\today}
\begin{document}
\maketitle


%表題
\makeatletter %ここから\makeatotherまで触らなくていい
	\def\@thesis{平成28年度 東邦大学理学部情報科学科 卒業研究}
	\def\id#1{\def\@id{#1}}
	\def\department#1{\def\@department{#1}}
	
	\def\@maketitle{
		\begin{center}
			\vspace{10mm}
			{\large \@thesis \par}	%修士論文と記載される部分
			\vspace{50mm}
			{\huge\bf \@title \par}	% 論文のタイトル部分
			\vspace{15mm}
			{\Large 学籍番号　\@id \par}	% 学籍番号部分
			\vspace{5mm}
			{\Large \@author \par}	% 氏名
			\vspace{50mm}
		\end{center}
		\begin{flushright}
			{\large 金岡研究室}
		\end{flushright}
	}
\makeatother

\title{タイトルです} %中括弧の中に卒論のタイトル
\id{5517044} %学籍番号
\author{小林 裕} %名前
\maketitle{\title} %表紙の出力
\thispagestyle{empty} %このページ（表紙）のページ番号を消去
\newpage %強制改ページ

\tableofcontents %目次の出力





\newpage
\section{はじめに} 




\newpage
\section{前提知識}
\subsection{Android}
AndroidとはGoogle社によって開発された携帯汎用オペレーティングシステムである。スマートフォンやタブレット、時計、テレビなどに搭載されている。
世界一のシェアを持つも携帯汎用オペレーティングシステムであり、20億人を超える月間アクティブユーザーがいる。
\subsubsection{アプリケーション配布マーケット}
GoogleやAppleが提供するモバイルプラットフォームでは、アプリケーション配布のマーケットが提供されている。GoogleではGoogle Playが公式のマーケットであり、
AppleではApp Storeが公式のマーケットである。Androidアプリにはその他に多くのサードパーティ製マーケットが存在する。
マーケットからソフトウェアを入手しインストールするために、マーケットへのアクセス専用のアプリケーションが提供されている。Androidでは
Google Playアプリが提供されており、多くの端末においてあらかじめインストールされている。
\subsubsection{アプリ開発}
アプリ開発の際の言語は、Java、Kotlin、C/C++で書くことが可能であるが、基本的にJavaを利用する。開発環境としてはAndroid Studioが公式リリースされている。
\subsubsection{ライブラリ}
ライブラリとは、汎用性の高い複数のプログラムを再利用可能な形でひとまとまりにしたものである。また、それ単体ではプログラムとして動作させることはできないもの。
標準的なライブラリはOSやソフトウェア開発環境の一部として添付されることもある。Android開発においては、Google社から提供されているライブラリやサードパーティライブラリが存在する。
\subsubsection{APK}
APKとは、Google社によって開発されたAndroid専用ソフトウェアパッケージのことである。APKの入手方法はAPKストアからダウンロードする方法や、単体で公開されているAPKファイルをダウンロードする方法などが存在する。
一般にAPKの拡張子は".apk"であり、内部の構造はzipファイルと同様である。

APKファイルに対してzipファイルと同様の解凍処理を行、得られる内部フォルダは以下のような後世になっている。（●はフォルダ、○はファイルを表す。）
\begin{tabbing}
 \hspace{8mm} \= \hspace{10mm} \= \hspace{12mm} \= \hspace{15mm} \kill
\>┏●META-INF
\\\>┃\>┣〇MANIFEST.MF
\\\>┃\>┣〇*.SF
\\\>┃\>┗〇*.RSA or -*.DSA
\\\>┣●lib
\\\>┣●res
\\\>┣●assets
\\\>┣〇AndroidManifest.xml
\\\>┣〇classes.dex
\\\>┗〇resources.arsc
\end{tabbing}

\subsubsection{APKストア}
APKストアとは、開発者の作成したAndroidアプリの配信を代行するサービス、及びそれを行っているWebサイトのことである。
Androidの公式APKストアはGoogle Play１つのみであり、非公式のAPKストアは数多く存在する。
\subsubsection{Smaliファイル}
Smaliファイルとは、APKに含まれるソースコードをDalvikバイトコードとして表記したものであり、その情報はclasses.dexに含まれている。
Dalvikバイトコードとは、Androidにおける中間言語である。Apktool等を用いてAPKより取得できるSmaliファイルは、Dalvikバイトコードで記述されている。
\subsubsection{APKからSmaliファイルの変換}
APKからSmaliファイルを展開する方法は、Apktoolを使う方法がある。ApktoolはAPKに含まれる全てのリソース・ソースコード・XMLを展開する。
importされたパッケージがディレクトリとして存在し、これにより使用ライブラリ

\subsection{IP}
IPとは、複数の通信ネットワークを相互に接続し、データを中継・伝送して一つの大きなネットワークにすることができる通信規約である。
また、IPにおいてパケットを送受信する機器を判別するための番号をIPアドレスという。

現在IPはIPv4とIPv6が混在した状態にある。

IPv4アドレスは32ビットで構成される世界で重複のないアドレスで、8ビット毎4つにピリオドで区切った数値列を10進数で表され、
例えば"192.168.255.255"のように表記されます。
一方、IPv6アドレスは128ビットを16ビット毎8つにコロンで区切った数値列を16進数で表され、
例えば"2001:0DB8:0000:0000:0008:0800:200C:417A"のように表記されます。
IPv6アドレス表記では連続する0は省略可能であるが、各フィールドに少なくとも1つの数値を含ませなければならない。
また、16ビットの0が複数連続している場合は"::"と何処でも省略することができるが、省略できるのは一カ所のみ。
例えば"2001:0DB8:0000:0000:0008:0800:200C:417A"というIPv6アドレスは"2001:DB8::8:800:200C:417A"と省略する。
IPv4アドレスではネットワーク部とホスト部に別れて構成される。
一方、IPv6アドレスはサブネットプレフィックスとインターフェースIDに別れて構成される。
IPv6のサブネットプレフィックスは、IPv4のネットワーク部に該当し、IPv6のインターフェースIDは、IPv4のホスト部に該当する。
サブネットフィックスは64ビットが標準的な値であるため、インターフェースIDも64ビットであることが一般的である。
IPv4アドレスとIPv6アドレスの大きな違いとしては、アドレスビット長が32ビットから128ビットと大幅に拡張している事が挙げられる。
その他に、IPv4ではヘッダチェックサムがあるが、TCPやアプリケーション側でエラーチェックを行なっているためIPレベルのエラーチェックは不要だとして、IPv6ではヘッダチェックサムが削除された。
また、品質制御利用のためのフローラベルが追加されるなどの違いがある。
IPv4での通信の種類は、ユニキャスト、ブロードキャスト、マルチキャストの3種類でしたが、IPv6ではブロードキャストがマルチキャストへと統合されました。
IPv4でブロードキャストで行われていたものは、IPv6ではマルチキャストを利用してい行われている。
一方、IPv6での通信の種類は、ユニキャスト、マルチキャスト、エニーキャストの３種類である。
\subsubsection{IPv4アドレス枯渇問題}
現在IPv4が広く利用されているが、インターネットの利用者が増えたことによりIPv4アドレスが枯渇していることが問題になっている。
IPv4アドレスは32ビットのビット長を持ち、約43億個のアドレスを表現することができる。この数はインターネット黎明期の頃は十分な大きさと考えられていたが、
インターネットに接続される機器が増え続けたことにより、割り当ての限界を迎えつつある。そのためアドレス空間をIPv4から大幅に拡張するなど対策のとられたIPv6が導入され、
IPv4からIPv6への移行が進んでいくと予想される。しかしながら、IPv4とIPv6の間には互換性がなく、相互通信を行うことができないため
IPv4とIPv6の混在環境が続き、いずれ混在する環境からIPv6だけの環境(IPv6 Single Stack)へと移行していく。
\subsubsection{IPv6 Single Stack}
IPv6 Single StackとはIPv6のみで動作させる仕組みである。IPv6 Single Stack環境構築にはIPv6 over IPv4トンネリングを利用する。
IPIPトンネリングとはIPv6パケット全体を一つのデータとして扱い、そのデータの先頭にIPv4ヘッダを付加しカプセル化することでIPv6ネットワークからIPv4ネットワークを
トンネリングし、IPv6通信を実現させる通信方法である。
\subsubsection{IPv4/IPv6 共存技術}
IPv4/IPv6共存環境にはDual Stack環境やNAT64/DNS64が存在する。
Dual Stackは現在一般的に用いられているIPv4/IPv6共存技術であり、単一の危機においてIPv4とIPv6を同時に動作させる事ができる。
IPv4対応危機と通信を行う際にはIPv4を使用し、IPv6対応機器と通信を行う際にはIPv6を使用する。一方NAT64/DNS64はIPv6ネットワークからIPv4ネットワーク
に接続する技術である。Dual StackがIPv4アドレスとIPv6アドレスの両方を必要とsるのに対し、NAT64/DNS64はIPv6アドレスのみを与え利用される技術である。
IPv4アドレス枯渇問題対策として有効である。

Dual Stack環境は、RAを動作させているルータマシンでDHCPサーバのソフトウェアをインストールし起動させプライベートIPアドレス等必要な設定を行、NATでIPv4ネットwー国
アクセス
する。NATとはプライベートIPv4アドレスとグローバルIPv4アドレスの間でアドレス変換をする技術である。

\newpage
\section{関連研究} %先に書く
\subsection{北口らによる調査}
北口らは、IPv6対応状況の研究としてOSの観点から調査を行なった。そこでは各種OSにおけるIPv6実装状況の検証がされ、さらにネットワーク運用管理に与える影響について
考察を行なっていた。表２は各OSにおけるSLAACで用いるインターフェースIDの生成手法、RAにおけるRDNSSオプションの実装、DHCPv6の実装及びIPv6 Single Stack環境での検証結果を
示している。ただしMicrosoft社のインターフェースIDの生成方法は確認できていない。

Android OSについては、バージョン4、５、６、７を対処に調査が行われており、全てのバージョンでDHCPv6に未対応であることと、バージョン4ではIPv6 Single Stack環境では動作しないことが示されている。
また運用管理の課題としては、セキュリティインシデント時のトレーサビリティ困難性が挙げられている。
\subsection{Durdagiらによる調査}
DurdagiらはIPv6とIPv4のセキュリティと脅威の比較調査を行なった。しかし、技術使用の視点からの指摘はされているが、運用の視点や混在環境での脅威といった視点では議論は行われいない。

\subsection{Rosilらによる調査}
RosliらはIPv6環境の脅威に焦点をあて、セキュリティ対策の提案をした。しかし、技術使用の視点からの指摘はされているが、運用の視点や混在環境での脅威といった視点では議論は行われていない。


\subsection{加茂らよる調査}
加茂らはAndroidに焦点を当てIPv6 Single Stack環境でOSが稼働するか、マーケットが対応しているか、Androidアプリが動くか複数の視点で行われた。
しかし、Androidアプリの未対応である原因についてまでは書かれていなかった。

\newpage
\section{調査及び分析内容・手法}
\subsection{調査環境のデザイン}
\subsection{APKからSmaliファイルの変換プログラム}
Smaliファイルの取得はapktoolを用いてapkファイルの変換を行う。
APKからSmaliファイルの変換を行うために以下のコマンドを実行した。



\subsection{Smaliファイル内からIPv4アドレスの探索プログラム}
\subsection{AndroidManifest内からapplicationIdを取得するプログラム}
\subsection{Androidアプリ内にIPアドレスのハードコーディングがされているのか調査}
\subsection{グローバルIPアドレスとプライベートIPアドレスの割合調査}
\subsection{Androidアプリの種類調査}


\end{document}